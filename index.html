<html>
    <head>
        <title>cImpact</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="shortcut icon" href="img/logo.png">
        <link rel="stylesheet" type="text/css" href="css/login.css">
    </head>
    <body>
      <div id="id01" class="modal">
        <form class="modal-content animate" action="/action_page.php">
          <div class="imgcontainer">
            <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
            <img src="https://www.w3schools.com/howto/img_avatar2.png" alt="Avatar" class="avatar">
          </div>

          <div class="container">
            <label><b>Email</b></label>
            <input type="text" placeholder="Enter Email" name="uname" id="lEmail" required>

            <label><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" id="lPassword" required>

            <button type="submit" id="lButton">Login</button>
            <input type="checkbox" checked="checked"> Remember me
          </div>

          <div class="container" style="background-color:#f1f1f1">
            <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
            <span class="psw">Forgot <a href="#">password?</a></span>
          </div>
        </form>
      </div>
        <ul>
          <div style="float: left; display: table;">
            <img style="height: 40px; display: inline; width: 40px; display: table-cell; margin-right: 15px;" src="img/logo.png">
            <h1 style="color: white; margin: 5px 0 0 10px; display: table-cell; vertical-align: middle;">cImpact</h1>
          </div>
          <div style="float: right;">
            <li><a id="loginButton" href="login.html" onclick="document.getElementById('id01').style.display='block'; return false;">Login</a></li>
            <li><a id="registerButton" href="register.html">Register</a></li>
            <li><a href="TransportationCalculatePage.html">Transportation</a></li>
            <li><a id="signOut" style="display: none;">Sign Out</a></li>
          </div>
        </ul>
        <h1 id="header">Hello</h1>

        <center><img src="https://ecochiccayman.files.wordpress.com/2015/02/melting-ice-polar-bear-on-206311.jpg"></center>
        <center><img src="http://www.naturaironline.com/contents/media/naturair%20pollution%20factory.gif"></center>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.6.0/firebase.js"></script>
        <script>
          // This code is for the login popup
          var modal = document.getElementById('id01');
          window.onclick = function(event) {
              if (event.target == modal) {
                  modal.style.display = "none";
              }
          }
        </script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyCPE-4VYjPkJjWnOF7yrXq6lD4Zdaw9XA0",
            authDomain: "carbon-footprint-1c2cb.firebaseapp.com",
            databaseURL: "https://carbon-footprint-1c2cb.firebaseio.com",
            projectId: "carbon-footprint-1c2cb",
            storageBucket: "",
            messagingSenderId: "770037889701"
          };
          firebase.initializeApp(config);
        </script>

        <script>
          var logged = document.querySelector('h1')
          var signOut = document.getElementById('signOut')

          var lEmail = document.getElementById('lEmail')
          var lPassword = document.getElementById('lPassword')
          var lButton = document.getElementById('lButton')

          var l = document.querySelector('h1')

          lButton.onclick = function() {
            firebase.auth().signInWithEmailAndPassword(lEmail.value, lPassword.value).catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              // ...
            });
            document.getElementById('id01').style.display='none';
            return false;
          }

          firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
              logged.innerHTML = "Logged in as " + user.email;
              document.getElementById('signOut').style.display = 'block';
              document.getElementById('loginButton').style.display = 'none';
              document.getElementById('registerButton').style.display = 'none';
            }
          })

          signOut.onclick = function() {
            firebase.auth().signOut().then(function() {
              logged.innerHTML = "Sign out Successful"
              window.location.replace('index.html')
            }).catch(function(error) {
              logged.innerHTML = "Sign out Unsuccessful"
            })
          }
        </script>
    </body>
</html>
